(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{324:function(t,e,n){"use strict";n.r(e);n(48),n(49),n(50),n(3);var r=n(17),c=n(23),o=n(304),h=n(305);function l(){try{return window.screen.width}catch(t){return}}var O=n(25),d=n(32),m=n(33),f=function t(e){var n=e.$LOGGER;Object(r.a)(this,t),this.LOGGER=void 0,this.LOGGER=n.getLogger(this),this.LOGGER.info("Initiated")},v=function(){function t(e,n){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(r.a)(this,t),Object.defineProperty(this,I,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,T,{writable:!0,value:void 0}),Object(o.a)(this,T)[T]=e,Object(o.a)(this,I)[I]=n,Object(o.a)(this,_)[_]=c}return Object(c.a)(t,[{key:"loved",value:function(){Object(o.a)(this,_)[_]="LOVE"}},{key:"isLoved",value:function(){return"LOVE"===Object(o.a)(this,_)[_]}},{key:"hated",value:function(){Object(o.a)(this,_)[_]="HATE"}},{key:"isHated",value:function(){return"HATE"===Object(o.a)(this,_)[_]}},{key:"toJSON",value:function(){return{id:Object(o.a)(this,T)[T]||void 0,imageUrl:Object(o.a)(this,I)[I]||void 0,rating:Object(o.a)(this,_)[_]||void 0}}},{key:"id",get:function(){return Object(o.a)(this,T)[T]},set:function(t){Object(o.a)(this,T)[T]=t}},{key:"imageUrl",get:function(){return Object(o.a)(this,I)[I]},set:function(t){Object(o.a)(this,I)[I]=t}},{key:"rating",get:function(){return Object(o.a)(this,_)[_]}}],[{key:"fromJSON",value:function(e){return new t(e.id,e.imageUrl,e.rating)}},{key:"unratedKitten",value:function(e,n){return new t(e,n)}},{key:"lovedKitten",value:function(e,n){var r=new t(e,n);return r.loved(),r}},{key:"hatedKitten",value:function(e,n){var r=new t(e,n);return r.hated(),r}}]),t}(),I=Object(h.a)("_imageUrl"),_=Object(h.a)("_rating"),T=Object(h.a)("_id"),w=n(135);var j,K,E=function(t){function e(t){var n=t.$LOGGER;return Object(r.a)(this,e),Object(O.a)(this,Object(d.a)(e).call(this,{$LOGGER:n}))}return Object(m.a)(e,t),Object(c.a)(e,[{key:"requestNextKitten",value:function(t,e){var n,i,r,c,o;return regeneratorRuntime.async((function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,regeneratorRuntime.awrap(new Promise((function(t){return setTimeout((function(){return t()}),5)})));case 2:for(this.LOGGER.info("requestNextKitten: Request with numberOfKitten = ".concat(t," and imageSize ").concat(e,"x").concat(e," px")),n=[],i=1;i<=t;i++)l=1,O=16,r=Math.floor(Math.random()*(O-l+1)+l),c=w.a.fromHost("http://placekitten.com/").path(Math.min(e,680)).path(Math.min(e,680)).queryParam("image",r).toString(),o=v.unratedKitten(i,c),n.push(o);return this.LOGGER.info("requestNextKitten: Response with ",n),h.abrupt("return",n);case 7:case"end":return h.stop()}var l,O}),null,this)}},{key:"sendRatedKitten",value:function(t){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(new Promise((function(t){return setTimeout((function(){return t()}),5)})));case 2:this.LOGGER.info("sendRatedKitten: Send rated kitten list with ".concat(t.length," enties to the backend."),t);case 3:case"end":return e.stop()}}),null,this)}}]),e}(f),N=n(136),x=function(){function t(e){var n=e.$store,c=(e.$axios,e.$LOGGER);Object(r.a)(this,t),Object.defineProperty(this,R,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),Object.defineProperty(this,k,{writable:!0,value:void 0}),Object(o.a)(this,R)[R]=c.getLogger(this),Object(o.a)(this,R)[R].info("Initiated"),Object(o.a)(this,y)[y]=n,this._selectKittenProvider(c)}return Object(c.a)(t,[{key:"nextKitten",value:function(){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this._loadNextKitten());case 2:return t.next=4,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].getters["KITTEN/getFirstIncomingKitten"]);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),null,this)}},{key:"loveKitten",value:function(t){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.rating){e.next=4;break}this._rateKitten(v.lovedKitten(t.id,t.imageUrl)),e.next=5;break;case 4:throw new Error("An rated kitten (".concat(t.rating,") with id ").concat(t.id," could not re-rated."));case 5:case"end":return e.stop()}}),null,this)}},{key:"hateKitten",value:function(t){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.rating){e.next=4;break}this._rateKitten(v.hatedKitten(t.id,t.imageUrl)),e.next=5;break;case 4:throw new Error("An rated kitten (".concat(t.rating,") with id ").concat(t.id," could not re-rated."));case 5:case"end":return e.stop()}}),null,this)}},{key:"_selectKittenProvider",value:function(t){var e=Object(o.a)(this,y)[y].getters.getAppMode;Object(o.a)(this,R)[R].info("Choosing kitten provider for app mode = ",e),"STANDALONE"===e&&(Object(o.a)(this,k)[k]=new E({$LOGGER:t}))}},{key:"_rateKitten",value:function(t){var e,n,r;return regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,regeneratorRuntime.awrap(this._addKittenToOutgoingQueue(t));case 2:return c.next=4,regeneratorRuntime.awrap(this._removeKittenFromIncomingQueue());case 4:if(e=Object(o.a)(this,y)[y].getters["KITTEN/getOutgoingRequestSize"],Object(o.a)(this,y)[y].getters["KITTEN/isOutgoingQueueInitialized"]){c.next=13;break}if(0===(n=this._getPersistedOutgoingKitten()).length){c.next=11;break}return Object(o.a)(this,R)[R].info("Load outgoing kitten list with ".concat(n.length," items from local storage"),n),c.next=11,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("KITTEN/ADD_KITTEN_TO_OUTGOING_QUEUE",n));case 11:return c.next=13,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("KITTEN/INITIALIZE_OUTGOING_QUEUE"));case 13:if(Object(o.a)(this,y)[y].getters["KITTEN/isOutgoingQueueLoading"]){c.next=31;break}return c.next=16,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("APP_UPDATING"));case 16:return c.next=18,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("KITTEN/SET_OUTGOING_QUEUE_LOADING_STATE",!0));case 18:return Object(o.a)(this,R)[R].info("Send rated kitten list with ".concat(e," items to kitten provider")),c.next=21,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].getters["KITTEN/getOutgoingKitten"]);case 21:return r=(r=c.sent).slice(-e),c.next=25,regeneratorRuntime.awrap(Object(o.a)(this,k)[k].sendRatedKitten(r));case 25:return c.next=27,regeneratorRuntime.awrap(this._removeKittenFromOutgoingQueue(e));case 27:return c.next=29,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("KITTEN/SET_OUTGOING_QUEUE_LOADING_STATE",!1));case 29:return c.next=31,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("APP_ONLINE"));case 31:case"end":return c.stop()}}),null,this)}},{key:"_addKittenToOutgoingQueue",value:function(t){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("KITTEN/ADD_KITTEN_TO_OUTGOING_QUEUE",t));case 2:this._persistOutgoingKitten(t);case 3:case"end":return e.stop()}}),null,this)}},{key:"_removeKittenFromOutgoingQueue",value:function(t){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("KITTEN/REMOVE_FIRST_KITTEN_FROM_OUTGOING_QUEUE",t));case 2:this._removeFirstPersistedOutgoingKitten(t);case 3:case"end":return e.stop()}}),null,this)}},{key:"_addKittenToIncomingQueue",value:function(t){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("KITTEN/ADD_KITTEN_TO_INCOMING_QUEUE",t));case 2:this._persistIncomingKitten(t);case 3:case"end":return e.stop()}}),null,this)}},{key:"_removeKittenFromIncomingQueue",value:function(){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("KITTEN/REMOVE_FIRST_KITTEN_FROM_INCOMING_QUEUE"));case 2:this._removeFirstPersistedIncomingKitten();case 3:case"end":return t.stop()}}),null,this)}},{key:"_loadNextKitten",value:function(){var t,e,n,r;return regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=l(),e=Object(o.a)(this,y)[y].getters["KITTEN/getIncomingRequestSize"],Object(o.a)(this,y)[y].getters["KITTEN/isIncomingQueueInitialized"]){c.next=10;break}if(0===(n=this._getPersistedIncomingKitten()).length){c.next=8;break}return Object(o.a)(this,R)[R].info("Load kitten list with ".concat(n.length," items from local storage"),n),c.next=8,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("KITTEN/ADD_KITTEN_TO_INCOMING_QUEUE",n));case 8:return c.next=10,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("KITTEN/INITIALIZE_INCOMING_QUEUE"));case 10:if(Object(o.a)(this,y)[y].getters["KITTEN/isIncomingQueueFilled"]||Object(o.a)(this,y)[y].getters["KITTEN/isIncomingQueueLoading"]){c.next=33;break}return c.prev=11,c.next=14,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("APP_UPDATING"));case 14:return c.next=16,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("KITTEN/SET_INCOMING_QUEUE_LOADING_STATE",!0));case 16:return Object(o.a)(this,R)[R].info("Request kitten list with ".concat(e," items from kitten provider")),c.next=19,regeneratorRuntime.awrap(Object(o.a)(this,k)[k].requestNextKitten(e,t));case 19:return r=c.sent,this._addKittenToIncomingQueue(r),c.next=23,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("KITTEN/SET_INCOMING_QUEUE_LOADING_STATE",!1));case 23:return c.next=25,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("APP_ONLINE"));case 25:c.next=32;break;case 27:return c.prev=27,c.t0=c.catch(11),Object(o.a)(this,R)[R].warn("Failed to fill incoming kitten queue.",c.t0),c.next=32,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("APP_OFFLINE"));case 32:this.fillIncomingKittenQueue(e,t);case 33:case"end":return c.stop()}}),null,this,[[11,27]])}},{key:"fillIncomingKittenQueue",value:function(t,e){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,Object(o.a)(this,y)[y].getters["KITTEN/isIncomingQueueLoading"]){r.next=19;break}return r.next=4,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("APP_UPDATING"));case 4:return r.next=6,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("KITTEN/SET_INCOMING_QUEUE_LOADING_STATE",!0));case 6:if(Object(o.a)(this,y)[y].getters["KITTEN/isIncomingQueueFilled"]){r.next=15;break}return Object(o.a)(this,R)[R].info("Request kitten list with ".concat(t," items from kitten provider")),r.next=10,regeneratorRuntime.awrap(Object(o.a)(this,k)[k].requestNextKitten(t,e));case 10:return n=r.sent,r.next=13,regeneratorRuntime.awrap(this._addKittenToIncomingQueue(n));case 13:r.next=6;break;case 15:return r.next=17,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("KITTEN/SET_INCOMING_QUEUE_LOADING_STATE",!1));case 17:return r.next=19,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("APP_ONLINE"));case 19:r.next=26;break;case 21:return r.prev=21,r.t0=r.catch(0),Object(o.a)(this,R)[R].warn("Failed to fill incoming kitten queue.",r.t0),r.next=26,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("APP_OFFLINE"));case 26:case"end":return r.stop()}}),null,this,[[0,21]])}},{key:"adjustKittenImageSize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:680;return w.a.fromHost("http://placekitten.com/").path(Math.min(e,680)).path(Math.min(e,680)).queryParam("image",t.id).toString()}},{key:"loadHint",value:function(){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==Object(N.a)("showHint")){t.next=6;break}return t.next=4,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("NOTIFICATION_SHOW_HINT"));case 4:t.next=8;break;case 6:return t.next=8,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("NOTIFICATION_DISCARD_HINT"));case 8:case"end":return t.stop()}}),null,this)}},{key:"dismissHint",value:function(){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(N.b)("showHint",!1),t.next=3,regeneratorRuntime.awrap(Object(o.a)(this,y)[y].dispatch("NOTIFICATION_DISCARD_HINT"));case 3:case"end":return t.stop()}}),null,this)}},{key:"_persistIncomingKitten",value:function(t){try{var e=JSON.parse(Object(N.a)("incomingKitten","[]"));t instanceof Array?t.forEach((function(t){e.push(t.toJSON())})):e.push(t.toJSON()),Object(N.b)("incomingKitten",JSON.stringify(e))}catch(t){Object(o.a)(this,R)[R].error("Failed to persist kitten",t)}}},{key:"_removeFirstPersistedIncomingKitten",value:function(){try{var t=JSON.parse(Object(N.a)("incomingKitten","[]"));t.splice(0,1),Object(N.b)("incomingKitten",JSON.stringify(t))}catch(t){Object(o.a)(this,R)[R].error("Failed to persist kitten",t)}}},{key:"_getPersistedIncomingKitten",value:function(){try{return JSON.parse(Object(N.a)("incomingKitten","[]"))}catch(t){Object(o.a)(this,R)[R].error("Failed to access persisted kitten",t)}}},{key:"_persistOutgoingKitten",value:function(t){try{var e=JSON.parse(Object(N.a)("outgoingKitten","[]"));t instanceof Array?t.forEach((function(t){e.push(t.toJSON())})):e.push(t.toJSON()),Object(N.b)("outgoingKitten",JSON.stringify(e))}catch(t){Object(o.a)(this,R)[R].error("Failed to persist kitten",t)}}},{key:"_removeFirstPersistedOutgoingKitten",value:function(t){try{var e=JSON.parse(Object(N.a)("outgoingKitten","[]"));e.splice(0,t),Object(N.b)("outgoingKitten",JSON.stringify(e))}catch(t){Object(o.a)(this,R)[R].error("Failed to persist kitten",t)}}},{key:"_getPersistedOutgoingKitten",value:function(){try{return JSON.parse(Object(N.a)("outgoingKitten","[]"))}catch(t){Object(o.a)(this,R)[R].error("Failed to access persisted kitten",t)}}}]),t}(),R=Object(h.a)("LOGGER"),y=Object(h.a)("store"),k=Object(h.a)("kittenProvider"),G=x,A={props:{imageUrl:"",loading:!0},data:function(){return{}},computed:{},methods:{}},U=n(31),S=n(36),L=n.n(S),P=n(103),F=n(117),Q=n(322),component=Object(U.a)(A,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-img",{staticClass:"grey lighten-2",attrs:{"max-width":"680","max-height":"680","min-width":"170","min-height":"170",eager:"",contain:"",src:this.imageUrl}},[this.loading?e("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[e("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1):this._e()],1)}),[],!1,null,null,null),D=component.exports;L()(component,{VImg:P.a,VProgressCircular:F.a,VRow:Q.a});var C={components:{KittenImage:D},mounted:function(){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return j=this.$LOGGER.getLogger(this),K=new G(this),t.next=4,regeneratorRuntime.awrap(K.nextKitten());case 4:return this.currentKitten=t.sent,t.next=7,regeneratorRuntime.awrap(K.loadHint());case 7:j.info("Loaded"),this.loading=!1;case 9:case"end":return t.stop()}}),null,this)},data:function(){return{currentKitten:null,loading:!0}},computed:{ready:function(){return!!this.currentKitten},getKitten:function(){return this.currentKitten?this.currentKitten:v.unratedKitten(0,"")},getAppState:function(){return this.$store.getters.getAppState},showHint:function(){return!!this.ready&&this.$store.getters.showNotificationHint}},methods:{hate:function(){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,regeneratorRuntime.awrap(K.hateKitten(this.currentKitten));case 3:return t.next=5,regeneratorRuntime.awrap(K.nextKitten());case 5:this.currentKitten=t.sent,this.loading=!1;case 7:case"end":return t.stop()}}),null,this)},love:function(){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,regeneratorRuntime.awrap(K.loveKitten(this.currentKitten));case 3:return t.next=5,regeneratorRuntime.awrap(K.nextKitten());case 5:this.currentKitten=t.sent,this.loading=!1;case 7:case"end":return t.stop()}}),null,this)},dismissHint:function(){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(K.dismissHint());case 2:case"end":return t.stop()}}))}}},H=n(326),M=n(133),J=n(309),V=n(308),$=n(323),z=n(310),Z=n(311),B=n(298),W=Object(U.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{column:"","justify-center":"","align-center":""}},[n("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t.ready&&t.showHint?n("v-alert",{attrs:{text:"",color:"primary"}},[n("h3",{staticClass:"headline"},[t._v("Dear kitten lover or hater,")]),t._v("\n\n      "+t._s(t.showHint)+"\n\n      "),n("v-row",{attrs:{align:"center","no-gutters":""}},[n("v-col",{staticClass:"grow"},[t._v("\n          you can use the buttons to rate the kitten.\n        ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-col",{staticClass:"shrink"},[n("v-btn",{attrs:{color:"primary",outlined:""},on:{click:function(e){return t.dismissHint()}}},[t._v("\n            Dismiss\n          ")])],1)],1)],1):t._e(),t._v(" "),n("v-card",{attrs:{raised:""}},[n("kitten-image",{attrs:{imageUrl:t.getKitten.imageUrl,loading:t.loading}}),t._v(" "),n("v-card-actions",[n("v-btn",{attrs:{raised:"",large:"",color:"#038F79"},on:{click:function(e){return t.hate()}}},[t._v("HATE\n        ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{raised:"",large:"",color:"primary"},on:{click:function(e){return t.love()}}},[t._v("LOVE\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=W.exports;L()(W,{VAlert:H.a,VBtn:M.a,VCard:J.a,VCardActions:V.a,VCol:$.a,VFlex:z.a,VLayout:Z.a,VRow:Q.a,VSpacer:B.a})}}]);